(function(){"use strict";var t=this,n=t.dryify;(function(){function e(){this._compact=function(t){for(var n=-1,e=t?t.length:0,r=-1,o=[];++n<e;){var i=t[n];i&&(o[++r]=i)}return o},this._getFunctionParameterNames=function(t){var n=t.toString();return n.slice(n.indexOf("(")+1,n.indexOf(")")).match(/([^\s,]+)/g)||[]},this._interpretJsonPath=function(t){if("string"!=typeof t)throw Error("@jsonPath must be a string. Type is ["+typeof t+"]");if(t){t=this._compact(t.split(/[\]\.]+|\[|\]/g));for(var n=0;n<t.length;n++)isNaN(t[n])||(t[n]=parseInt(t[n]))}else t=[];return t}}return e.prototype.optionify=function(t,n){var e=this;if("function"!=typeof t)throw Error("@fn must take a function argument. Type is ["+typeof t+"]");return function(r){var o,i=[];for(n instanceof Array||(n=e._getFunctionParameterNames(t)),o=n.length;o--;)i[o]=r[n[o]];return t.apply(e,i)}},e.prototype.getval=function(t,n,e){function r(t){return"function"!=typeof t?t||null:t()}if(n=this._interpretJsonPath(n),!t)return r(e);for(var o=0;o<n.length;o++){if(!t||"undefined"==typeof t[n[o]]||null===typeof t[n[o]])return r(e);t=t[n[o]]}return t},e.prototype.setval=function(t,n,e,r){var o,i,f=t;if("object"!=typeof f||"string"!=typeof n)throw Error("@setval missing some mandatory arguments");n=this._interpretJsonPath(n);for(var u=0;u<n.length;u++)if(o=n[u],i=n[u+1],"undefined"==typeof f[o]){if(r!==!0){if("function"==typeof r)return r(t,e);break}"undefined"!=typeof i?("string"==typeof i?f[o]={}:f[o]=[],f=f[o]):f[o]=e}else f=f[o];return t},e.prototype.traverse=function(t,n){function e(t){var r=0;for(var o in t)"function"!=typeof t[o]&&(t[o]=n(t[o],r++),t[o]&&"object"==typeof t[o]&&e(t[o]));return t}return e(t)},e.prototype.noConflict=function(){return t.dryify=n,dryify},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=new e),exports.dryify=new e):t.dryify=new e,e})()}).call(this);